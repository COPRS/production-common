# General Application properties
app.*.spring.kafka.bootstrap-servers=kafka-cluster-kafka-bootstrap.infra.svc.cluster.local:9092
app.*.main.banner-mode=off
app.*.management.endpoint.health.show-details=always
app.*.logging.config=/log/log4j2.yml

# Error Management
app.*.spring.cloud.stream.bindings.input.consumer.maxAttempts=1
app.*.spring.cloud.stream.kafka.bindings.input.consumer.enableDlq=false
app.*.spring.cloud.stream.kafka.bindings.input.consumer.dlqName=error-warning

# Custom Application properties
app.dlq-manager.dlq-manager.hostname=${HOSTNAME}
app.dlq-manager.dlq-manager.parking-lot-topic=s1-parking-lot
app.dlq-manager.dlq-manager.routing.demo1.errorTitle=Demonstration rule 1
app.dlq-manager.dlq-manager.routing.demo1.errorID=.*IllegalArgumentException.*
app.dlq-manager.dlq-manager.routing.demo1.actionType=Restart
#app.dlq-manager.dlq-manager.routing.demo1.targetTopic=
app.dlq-manager.dlq-manager.routing.demo1.maxRetry=2
app.dlq-manager.dlq-manager.routing.demo1.priority=100
#app.dlq-manager.dlq-manager.routing.demo1.comment=
app.dlq-manager.dlq-manager.routing.obs1.errorTitle=OBS Download/Upload failed
app.dlq-manager.dlq-manager.routing.obs1.errorID=.*ObsParallelAccessException.*
app.dlq-manager.dlq-manager.routing.obs1.actionType=Restart
#app.dlq-manager.dlq-manager.routing.obs1.targetTopic=
app.dlq-manager.dlq-manager.routing.obs1.maxRetry=2
app.dlq-manager.dlq-manager.routing.obs1.priority=100
app.dlq-manager.dlq-manager.routing.obs1.comment=Race Condition or Eventual Consistency issue
app.dlq-manager.dlq-manager.routing.obs2.errorTitle=Empty File in OBS
app.dlq-manager.dlq-manager.routing.obs2.errorID=.*ObsEmptyFileException.*
app.dlq-manager.dlq-manager.routing.obs2.actionType=Restart
#app.dlq-manager.dlq-manager.routing.obs2.targetTopic=
app.dlq-manager.dlq-manager.routing.obs2.maxRetry=2
app.dlq-manager.dlq-manager.routing.obs2.priority=100
#app.dlq-manager.dlq-manager.routing.obs2.comment=
app.dlq-manager.dlq-manager.routing.obs3.errorTitle=Generic OBS issue
app.dlq-manager.dlq-manager.routing.obs3.errorID=.*ObsServiceException.*
app.dlq-manager.dlq-manager.routing.obs3.actionType=Restart
#app.dlq-manager.dlq-manager.routing.obs3.targetTopic=
app.dlq-manager.dlq-manager.routing.obs3.maxRetry=2
app.dlq-manager.dlq-manager.routing.obs3.priority=100
#app.dlq-manager.dlq-manager.routing.obs3.comment=
app.dlq-manager.dlq-manager.routing.es.errorTitle=Elasticsearch issues
app.dlq-manager.dlq-manager.routing.es.errorID=.*Elasticsearch.*
app.dlq-manager.dlq-manager.routing.es.actionType=Restart
#app.dlq-manager.dlq-manager.routing.es.targetTopic=
app.dlq-manager.dlq-manager.routing.es.maxRetry=1
app.dlq-manager.dlq-manager.routing.es.priority=100
#app.dlq-manager.dlq-manager.routing.es.comment=
app.dlq-manager.dlq-manager.routing.timeout.errorTitle=Any Timeout
app.dlq-manager.dlq-manager.routing.timeout.errorID=.*(?i:timeout).*
app.dlq-manager.dlq-manager.routing.timeout.actionType=Restart
#app.dlq-manager.dlq-manager.routing.timeout.targetTopic=
app.dlq-manager.dlq-manager.routing.timeout.maxRetry=1
app.dlq-manager.dlq-manager.routing.timeout.priority=100
#app.dlq-manager.dlq-manager.routing.timeout.comment=

# Mandatory Deployer Settings

# Liveness Probe
deployer.*.kubernetes.namespace=processing
deployer.*.kubernetes.livenessProbeDelay=10
deployer.*.kubernetes.livenessProbePeriod=120
deployer.*.kubernetes.livenessProbeTimeout=20
deployer.*.kubernetes.livenessProbePath=/actuator/health/liveness
deployer.*.kubernetes.livenessProbePort=8080

# Readiness Probe
deployer.*.kubernetes.readinessProbeDelay=10
deployer.*.kubernetes.readinessProbePeriod=120
deployer.*.kubernetes.readinessProbeTimeout=20
deployer.*.kubernetes.readinessProbePath=/actuator/health/readiness
deployer.*.kubernetes.readinessProbePort=8080

# Resources
# Setting JVM argument JMX for all application to 512m
deployer.*.kubernetes.environmentVariables=JAVA_TOOL_OPTIONS=-Xmx512m
deployer.*.kubernetes.requests.memory=512Mi
deployer.*.kubernetes.requests.cpu=500m
deployer.*.kubernetes.limits.memory=4000Mi
deployer.*.kubernetes.limits.cpu=1500m

deployer.*.kubernetes.maxTerminatedErrorRestarts=20
